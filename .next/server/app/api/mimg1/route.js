(()=>{var e={};e.id=561,e.ids=[561],e.modules={36:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>w,routeModule:()=>m,serverHooks:()=>h,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>f});var o={};t.r(o),t.d(o,{default:()=>c,formatFileSize:()=>d,isFileSizeValid:()=>u,isValidImageType:()=>p,uploadImageToAppScript:()=>l});var a=t(6559),i=t(8088),s=t(7719);let n=["image/jpeg","image/png","image/gif"],p=e=>n.includes(e.type),u=e=>e.size<=8388608,d=e=>{if(0===e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,r)).toFixed(2))} ${["Bytes","KB","MB","GB","TB"][r]}`},l=async(e,r,t,o)=>{try{if(!e||!r||!t||!o)return console.warn("Missing required parameters for upload."),{error:"Missing required upload parameters."};let a=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:t,contentType:r,data:e})});if(!a.ok){let e=await a.json();return console.error("Image upload to App Script failed:",e),{error:"Failed to upload image.",details:e?.message||"Unknown error from App Script."}}return await a.json()}catch(e){return console.error("Error during image upload:",e),{error:"An unexpected error occurred during upload.",details:e.message}}};async function c(e,r){if("POST"!==e.method)return r.setHeader("Allow",["POST"]),r.status(405).json({error:`Method ${e.method} Not Allowed`});try{let{data:t,contentType:o,fileName:a}=e.body,i=process.env.NEXT_PUBLIC_APPSCRIPT_URL;if(!i)return r.status(500).json({error:"App Script URL not configured."});let s=await l(t,o,a,i);if(s&&"imageUrl"in s&&"fileId"in s)return r.status(200).json(s);if(s&&"error"in s)return r.status(500).json(s);return r.status(500).json({error:"Failed to upload image."})}catch(e){return console.error("Error in /api/upload-to-appscript:",e),r.status(500).json({error:"Failed to forward image to App Script.",details:e.message})}}let m=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/mimg1/route",pathname:"/api/mimg1",filename:"route",bundlePath:"app/api/mimg1/route"},resolvedPagePath:"F:\\atad\\rstudio\\rstudioweb\\src\\app\\api\\mimg1\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:g,workUnitAsyncStorage:f,serverHooks:h}=m;function w(){return(0,s.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:f})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},6559:(e,r,t)=>{"use strict";e.exports=t(4870)},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[719],()=>t(36));module.exports=o})();